
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>æ˜Ÿå½¢è¯äº‘å›¾ï¼ˆTop150å…³é”®è¯ï¼‰</title>-->
<!--  <script src="https://cdnjs.cloudflare.com/ajax/libs/wordcloud2.js/1.1.1/wordcloud2.min.js"></script>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--      background: #f5f7fa;-->
<!--      text-align: center;-->
<!--    }-->
<!--    h2 {-->
<!--      margin: 20px 0;-->
<!--      color: #333;-->
<!--    }-->
<!--    #container {-->
<!--      width: 90%;-->
<!--      max-width: 1000px;-->
<!--      margin: 0 auto;-->
<!--      padding: 20px;-->
<!--    }-->
<!--    canvas {-->
<!--      width: 100% !important;-->
<!--      height: auto !important;-->
<!--      border-radius: 12px;-->
<!--      background-color: #fff;-->
<!--      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);-->
<!--    }-->
<!--    #tooltip {-->
<!--      position: fixed;-->
<!--      background-color: rgba(0, 0, 0, 0.8);-->
<!--      color: #fff;-->
<!--      padding: 8px 12px;-->
<!--      border-radius: 6px;-->
<!--      font-size: 14px;-->
<!--      display: none;-->
<!--      pointer-events: none;-->
<!--      z-index: 10;-->
<!--      opacity: 0;-->
<!--      transition: opacity 0.2s ease-in-out;-->
<!--      white-space: nowrap;-->
<!--    }-->
<!--    #tooltip.visible {-->
<!--      display: block;-->
<!--      opacity: 1;-->
<!--    }-->
<!--    #downloadBtn {-->
<!--      margin: 16px auto 30px;-->
<!--      padding: 10px 20px;-->
<!--      font-size: 16px;-->
<!--      cursor: pointer;-->
<!--      border: none;-->
<!--      background-color: #4B7BEC;-->
<!--      color: white;-->
<!--      border-radius: 8px;-->
<!--      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);-->
<!--      transition: background-color 0.3s ease;-->
<!--    }-->
<!--    #downloadBtn:hover {-->
<!--      background-color: #3a5ecb;-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->
<!--  <h2>æ˜Ÿå½¢è¯äº‘å›¾ï¼ˆTop 150 å…³é”®è¯ï¼‰</h2>-->
<!--  <div id="container">-->
<!--    <canvas id="wordcloudCanvas"></canvas>-->
<!--    <div id="tooltip"></div>-->
<!--  </div>-->
<!--  <button id="downloadBtn">ğŸ“¥ å¯¼å‡ºä¸º PNG å›¾ç‰‡</button>-->

<!--  &lt;!&ndash; æ˜Ÿå½¢è’™ç‰ˆå›¾åƒï¼ˆå»ºè®®ï¼šé€æ˜èƒŒæ™¯é»‘æ˜Ÿå½¢ PNGï¼‰ &ndash;&gt;-->
<!--  <img id="maskImg" src="mask_star.png" style="display:none;" crossorigin="anonymous" />-->

<!--  &lt;!&ndash; è¯é¢‘æ•°æ® &ndash;&gt;-->
<!--  <script src="top150_keywords.js"></script>-->

<!--  <script>-->
<!--    const canvas = document.getElementById('wordcloudCanvas');-->
<!--    const tooltip = document.getElementById('tooltip');-->
<!--    const maskImg = document.getElementById('maskImg');-->

<!--    function resizeCanvas() {-->
<!--      const dpr = window.devicePixelRatio || 1;-->
<!--      canvas.style.width = '800px';-->
<!--      canvas.style.height = '600px';-->
<!--      canvas.width = 800 * dpr;-->
<!--      canvas.height = 600 * dpr;-->
<!--    }-->

<!--    function drawWordCloud() {-->
<!--      const wordList = top150Keywords.map(item => [item.Keyword, item.Count]);-->

<!--      WordCloud(canvas, {-->
<!--        list: wordList,-->
<!--        gridSize: 4,-->
<!--        weightFactor: size => Math.log(size + 1) * 25,-->
<!--        minSize: 10,-->
<!--        fontFamily: "'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif",-->
<!--        color: function (word, weight) {-->
<!--          const palette = ['#4B7BEC', '#20BF6B', '#FC5C65', '#FED330', '#A55EEA', '#45AAF2'];-->
<!--          return palette[Math.floor(Math.random() * palette.length)];-->
<!--        },-->
<!--        rotateRatio: 0.5,-->
<!--        rotationSteps: 6,-->
<!--        backgroundColor: '#ffffff',-->
<!--        drawOutOfBound: false,-->
<!--        shuffle: true,-->
<!--        maskImage: maskImg, // â­ ä½¿ç”¨æ˜Ÿå½¢å›¾åƒé™åˆ¶åŒºåŸŸ-->
<!--        hover: function (item, dimension, event) {-->
<!--          if (item) {-->
<!--            tooltip.innerHTML = `<strong>${item[0]}</strong><br>é¢‘æ¬¡: ${item[1]}`;-->
<!--            tooltip.classList.add('visible');-->
<!--            requestAnimationFrame(() => {-->
<!--              const tooltipWidth = tooltip.offsetWidth;-->
<!--              const tooltipHeight = tooltip.offsetHeight;-->
<!--              const viewportX = event.pageX - window.pageXOffset;-->
<!--              const viewportY = event.pageY - window.pageYOffset;-->
<!--              const left = Math.min(viewportX + 10, window.innerWidth - tooltipWidth - 10);-->
<!--              const top = Math.min(viewportY + 10, window.innerHeight - tooltipHeight - 10);-->
<!--              tooltip.style.left = left + 'px';-->
<!--              tooltip.style.top = top + 'px';-->
<!--            });-->
<!--          } else {-->
<!--            tooltip.classList.remove('visible');-->
<!--          }-->
<!--        },-->
<!--        click: function (item) {-->
<!--          alert(`å…³é”®è¯: ${item[0]}\né¢‘æ¬¡: ${item[1]}`);-->
<!--        }-->
<!--      });-->
<!--    }-->

<!--    function init() {-->
<!--      resizeCanvas();-->
<!--      if (maskImg.complete) {-->
<!--        drawWordCloud();-->
<!--      } else {-->
<!--        maskImg.onload = drawWordCloud;-->
<!--      }-->
<!--    }-->

<!--    window.addEventListener('resize', () => {-->
<!--      resizeCanvas();-->
<!--      drawWordCloud();-->
<!--    });-->

<!--    init();-->

<!--    document.getElementById('downloadBtn').addEventListener('click', () => {-->
<!--      const link = document.createElement('a');-->
<!--      link.download = 'star_wordcloud.png';-->
<!--      link.href = canvas.toDataURL('image/png');-->
<!--      link.click();-->
<!--    });-->
<!--  </script>-->
<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html lang="zh">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>ğŸŒŸ æ˜Ÿå½¢è¯äº‘å›¾ - Top 150 å…³é”®è¯</title>-->
<!--  <script src="https://cdnjs.cloudflare.com/ajax/libs/wordcloud2.js/1.1.1/wordcloud2.min.js"></script>-->
<!--  <style>-->
<!--    body {-->
<!--      margin: 0;-->
<!--      padding: 0;-->
<!--      font-family: "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;-->
<!--      background: linear-gradient(145deg, #e6f0ff, #ffffff);-->
<!--      color: #333;-->
<!--    }-->

<!--    h2 {-->
<!--      text-align: center;-->
<!--      font-size: 32px;-->
<!--      margin-top: 30px;-->
<!--      color: #3c3c3c;-->
<!--      letter-spacing: 1px;-->
<!--    }-->

<!--	#container {-->
<!--	  width: 90%;-->
<!--	  max-width: 1000px;-->
<!--	  margin: 40px auto;-->
<!--	  padding: 20px;-->
<!--	  background: linear-gradient(135deg, rgba(173, 216, 230, 0.3), rgba(135, 206, 250, 0.3));-->
<!--	  border-radius: 20px;-->
<!--	  backdrop-filter: blur(8px);-->
<!--	  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);-->
<!--	  transition: all 0.3s ease;-->
<!--	}-->


<!--    canvas {-->
<!--      width: 100% !important;-->
<!--      height: auto !important;-->
<!--      border-radius: 16px;-->
<!--    }-->

<!--    #tooltip {-->
<!--      position: fixed;-->
<!--      background: rgba(0, 0, 0, 0.75);-->
<!--      color: #fff;-->
<!--      padding: 10px 14px;-->
<!--      font-size: 14px;-->
<!--      border-radius: 6px;-->
<!--      pointer-events: none;-->
<!--      opacity: 0;-->
<!--      transition: all 0.2s ease;-->
<!--      z-index: 999;-->
<!--    }-->

<!--    #tooltip.visible {-->
<!--      opacity: 1;-->
<!--    }-->

<!--    #downloadBtn {-->
<!--      display: block;-->
<!--      margin: 20px auto 50px;-->
<!--      padding: 12px 24px;-->
<!--      background-color: #007bff;-->
<!--      color: white;-->
<!--      border: none;-->
<!--      font-size: 16px;-->
<!--      border-radius: 10px;-->
<!--      cursor: pointer;-->
<!--      box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);-->
<!--      transition: background-color 0.3s ease, transform 0.2s ease;-->
<!--    }-->

<!--    #downloadBtn:hover {-->
<!--      background-color: #0056b3;-->
<!--      transform: scale(1.05);-->
<!--    }-->
<!--  </style>-->
<!--</head>-->

<!--<body>-->
<!--  <h2>ğŸŒŸ æ˜Ÿå½¢è¯äº‘å›¾ï¼ˆTop 150 å…³é”®è¯ï¼‰</h2>-->

<!--  <div id="container">-->
<!--    <canvas id="wordcloudCanvas"></canvas>-->
<!--    <div id="tooltip"></div>-->
<!--  </div>-->

<!--  <button id="downloadBtn">ğŸ“¥ å¯¼å‡º PNG å›¾ç‰‡</button>-->

<!--  &lt;!&ndash; è’™ç‰ˆå›¾åƒï¼ˆé€æ˜èƒŒæ™¯é»‘æ˜Ÿå½¢ï¼‰ &ndash;&gt;-->
<!--  <img id="maskImg" src="mask_star.png" style="display:none;" crossorigin="anonymous" />-->

<!--  &lt;!&ndash; æ¨¡æ‹Ÿè¯é¢‘æ•°æ® &ndash;&gt;-->
<!--  &lt;!&ndash; è¯é¢‘æ•°æ® &ndash;&gt;-->
<!--  <script src="top150_keywords.js"></script>-->

<!--  <script>-->
<!--    const canvas = document.getElementById('wordcloudCanvas');-->
<!--    const tooltip = document.getElementById('tooltip');-->
<!--    const maskImg = document.getElementById('maskImg');-->

<!--    function resizeCanvas() {-->
<!--      const dpr = window.devicePixelRatio || 1;-->
<!--      canvas.style.width = '800px';-->
<!--      canvas.style.height = '600px';-->
<!--      canvas.width = 800 * dpr;-->
<!--      canvas.height = 600 * dpr;-->
<!--    }-->

<!--    function drawWordCloud() {-->
<!--      const wordList = top150Keywords.map(item => [item.Keyword, item.Count]);-->

<!--      WordCloud(canvas, {-->
<!--        list: wordList,-->
<!--        gridSize: 6,-->
<!--        weightFactor: (size) => Math.pow(size, 0.7),-->
<!--        minSize: 12,-->
<!--        fontFamily: "'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif",-->
<!--        color: function (word, weight, fontSize, distance, theta) {-->
<!--          // è¿”å›æ¸å˜é¢œè‰²-->
<!--          const gradients = ['#00c6ff', '#0072ff', '#20bf6b', '#fc5c65', '#f7b731', '#a55eea'];-->
<!--          return gradients[Math.floor(Math.random() * gradients.length)];-->
<!--        },-->
<!--        rotateRatio: 0.4,-->
<!--        rotationSteps: 6,-->
<!--        backgroundColor: 'rgba(255,255,255,0)',-->
<!--        drawOutOfBound: false,-->
<!--        shuffle: true,-->
<!--        maskImage: maskImg,-->
<!--        hover: function (item, dimension, event) {-->
<!--          if (item) {-->
<!--            tooltip.innerHTML = `<strong>${item[0]}</strong><br>é¢‘æ¬¡: ${item[1]}`;-->
<!--            tooltip.classList.add('visible');-->
<!--            requestAnimationFrame(() => {-->
<!--              const tooltipWidth = tooltip.offsetWidth;-->
<!--              const tooltipHeight = tooltip.offsetHeight;-->
<!--              const viewportX = event.pageX - window.pageXOffset;-->
<!--              const viewportY = event.pageY - window.pageYOffset;-->
<!--              const left = Math.min(viewportX + 10, window.innerWidth - tooltipWidth - 10);-->
<!--              const top = Math.min(viewportY + 10, window.innerHeight - tooltipHeight - 10);-->
<!--              tooltip.style.left = left + 'px';-->
<!--              tooltip.style.top = top + 'px';-->
<!--            });-->
<!--          } else {-->
<!--            tooltip.classList.remove('visible');-->
<!--          }-->
<!--        },-->
<!--        click: function (item) {-->
<!--          alert(`å…³é”®è¯: ${item[0]}\né¢‘æ¬¡: ${item[1]}`);-->
<!--        }-->
<!--      });-->
<!--    }-->

<!--    function init() {-->
<!--      resizeCanvas();-->
<!--      if (maskImg.complete) {-->
<!--        drawWordCloud();-->
<!--      } else {-->
<!--        maskImg.onload = drawWordCloud;-->
<!--      }-->
<!--    }-->

<!--    window.addEventListener("resize", () => {-->
<!--      resizeCanvas();-->
<!--      drawWordCloud();-->
<!--    });-->

<!--    init();-->

<!--    document.getElementById("downloadBtn").addEventListener("click", () => {-->
<!--      const link = document.createElement("a");-->
<!--      link.download = "æ˜Ÿå½¢è¯äº‘å›¾.png";-->
<!--      link.href = canvas.toDataURL("image/png");-->
<!--      link.click();-->
<!--    });-->
<!--  </script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>ğŸŒŸ æ˜Ÿå½¢è¯äº‘å›¾ - Top 150 å…³é”®è¯</title>

  <!-- å¤–éƒ¨åº“ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/wordcloud2.js/1.1.1/wordcloud2.min.js"></script>

  <!-- æ•°æ®æ–‡ä»¶ï¼ˆå¿…é¡»æå‰å¼•å…¥ï¼‰ -->
  <script src="top150_keywords.js"></script>
  <script src="top100_keywords_cn.js"></script>
  <script src="top100_keywords_us.js"></script>
  <script src="top100_keywords_in.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
      background: linear-gradient(145deg, #e6f0ff, #ffffff);
      color: #333;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      gap: 30px;
      padding: 40px;
      box-sizing: border-box;
    }
    #container {
      width: 800px;
      background: linear-gradient(135deg, rgba(173, 216, 230, 0.3), rgba(135, 206, 250, 0.3));
      border-radius: 20px;
      backdrop-filter: blur(8px);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
      padding: 20px;
      box-sizing: border-box;
      position: relative;
    }
    canvas {
      width: 100% !important;
      height: 600px !important;
      border-radius: 16px;
      display: block;
    }
    #tooltip {
      position: fixed;
      background: rgba(0, 0, 0, 0.75);
      color: #fff;
      padding: 10px 14px;
      font-size: 14px;
      border-radius: 6px;
      pointer-events: none;
      opacity: 0;
      transition: all 0.2s ease;
      z-index: 999;
    }
    #tooltip.visible {
      opacity: 1;
    }
    #sidebar {
      width: 200px;
      background: #f0f8ff;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    #sidebar h3 {
      margin: 0 0 10px 0;
      font-size: 20px;
      color: #007bff;
      text-align: center;
    }
    #sidebar button {
      padding: 10px;
      font-size: 16px;
      border: none;
      background: #007bff;
      color: white;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #sidebar button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>

  <!-- ä¾§è¾¹æ  -->
  <div id="sidebar">
    <h3>é€‰æ‹©æ•°æ®é›†</h3>
    <button data-source="top150" data-title="å…¨çƒæ–°é—»çƒ­è¯">å…¨çƒæ–°é—»çƒ­è¯</button>
    <button data-source="top100_cn" data-title="ä¸­å›½æ–°é—»çƒ­è¯">ä¸­å›½æ–°é—»çƒ­è¯</button>
    <button data-source="top100_us" data-title="ç¾å›½æ–°é—»çƒ­è¯">ç¾å›½æ–°é—»çƒ­è¯</button>
    <button data-source="top100_in" data-title="å°åº¦æ–°é—»çƒ­è¯">å°åº¦æ–°é—»çƒ­è¯</button>
	  <hr style="margin: 10px 0;">
<button id="downloadBtn" style="background: #28a745;">å¯¼å‡ºä¸º PNG å›¾ç‰‡</button>
  </div>

  <!-- ä¸»å®¹å™¨ -->
  <div id="container">
    <h2 id="title">ğŸŒŸ æ˜Ÿå½¢è¯äº‘å›¾ - å…¨çƒæ–°é—»çƒ­è¯</h2>
    <canvas id="wordcloudCanvas"></canvas>
    <div id="tooltip"></div>
  </div>

  <!-- è’™ç‰ˆå›¾åƒ -->
  <img id="maskImg" src="mask_star.png" style="display:none;" crossorigin="anonymous" />

  <!-- æ•°æ®æ˜ å°„ -->
  <script>
    const datasets = {
      top150: top150,
      top100_cn: top100_cn,
      top100_us: top100_us,
      top100_in: top100_in
    };
  </script>

  <!-- ä¸»é€»è¾‘ -->
  <script>
    const canvas = document.getElementById('wordcloudCanvas');
    const tooltip = document.getElementById('tooltip');
    const maskImg = document.getElementById('maskImg');
    const title = document.getElementById('title');
    const buttons = document.querySelectorAll('#sidebar button');

    let currentDataset = 'top150';

    function resizeCanvas() {
      const dpr = window.devicePixelRatio || 1;
      canvas.style.width = '800px';
      canvas.style.height = '600px';
      canvas.width = 800 * dpr;
      canvas.height = 600 * dpr;
    }

function drawWordCloud() {
  const ctx = canvas.getContext('2d');
  ctx.clearRect(0, 0, canvas.width, canvas.height); // æ¸…é™¤æ—§å†…å®¹

  const data = datasets[currentDataset];
  const wordList = data.map(item => [item.Keyword, item.Count]);
  const maxCount = Math.max(...data.map(d => d.Count));

  // ğŸ‘‡ åˆ¤æ–­å½“å‰æ•°æ®æºï¼Œè®¾ç½®å­—å·æ”¾å¤§å€ç‡
  const zoomFactors = {
  top150: 1,
  top100_cn: 3.5,
  top100_us: 1.5,
  top100_in: 2.0
};
const zoomFactor = zoomFactors[currentDataset] || 1.5; // è®¾ç½®é»˜è®¤å€¼é˜²æ­¢æŠ¥é”™

  WordCloud(canvas, {
    list: wordList,
    gridSize: 6,
    weightFactor: (size) => zoomFactor * Math.sqrt(size) * 6,
    minSize: 8,
    fontFamily: "'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif",
    color: () => {
      const gradients = ['#00c6ff', '#0072ff', '#20bf6b', '#fc5c65', '#f7b731', '#a55eea'];
      return gradients[Math.floor(Math.random() * gradients.length)];
    },
    rotateRatio: 0.4,
    rotationSteps: 6,
    backgroundColor: 'rgba(255,255,255,0)',
    drawOutOfBound: false,
    shuffle: true,
    maskImage: maskImg,
    hover: function (item, dimension, event) {
      if (item) {
        tooltip.innerHTML = `<strong>${item[0]}</strong><br>é¢‘æ¬¡: ${item[1]}`;
        tooltip.classList.add('visible');
        requestAnimationFrame(() => {
          const tooltipWidth = tooltip.offsetWidth;
          const tooltipHeight = tooltip.offsetHeight;
          const viewportX = event.pageX - window.pageXOffset-350;
          const viewportY = event.pageY - window.pageYOffset+10;
          const left = Math.min(viewportX + 10, window.innerWidth - tooltipWidth - 10);
          const top = Math.min(viewportY + 10, window.innerHeight - tooltipHeight - 10);
          tooltip.style.left = left + 'px';
          tooltip.style.top = top + 'px';
        });
      } else {
        tooltip.classList.remove('visible');
      }
    },
    click: function (item) {
      alert(`å…³é”®è¯: ${item[0]}\né¢‘æ¬¡: ${item[1]}`);
    }
  });
}


    function init() {
      resizeCanvas();
      if (maskImg.complete) {
        drawWordCloud();
      } else {
        maskImg.onload = drawWordCloud;
      }
    }

    document.getElementById('downloadBtn').addEventListener('click', () => {
	  const link = document.createElement('a');
	  link.download = `${currentDataset}_wordcloud.png`;
	  link.href = canvas.toDataURL('image/png');
	  link.click();
	});


    window.addEventListener("resize", () => {
      resizeCanvas();
      drawWordCloud();
    });

    buttons.forEach(button => {
      button.addEventListener('click', () => {
        currentDataset = button.getAttribute('data-source');
        const newTitle = button.getAttribute('data-title');
        title.textContent = `ğŸŒŸ æ˜Ÿå½¢è¯äº‘å›¾ - ${newTitle}`;
        drawWordCloud();
      });
    });

    init();
  </script>
</body>
</html>
